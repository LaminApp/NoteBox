angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.modal","ui.bootstrap.progressbar"]);angular.module("ui.bootstrap.tpls",["template/modal/backdrop.html","template/modal/window.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html"]);angular.module('ui.bootstrap.modal',[]).factory('$$stackedMap',function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value});},get:function(key){for(var i=0;i<stack.length;i++){if(key==stack[i].key){return stack[i];}}},keys:function(){var keys=[];for(var i=0;i<stack.length;i++){keys.push(stack[i].key);}return keys;},top:function(){return stack[stack.length-1];},remove:function(key){var idx=-1;for(var i=0;i<stack.length;i++){if(key==stack[i].key){idx=i;break;}}return stack.splice(idx,1)[0];},removeTop:function(){return stack.splice(stack.length-1,1)[0];},length:function(){return stack.length;}};}};}).directive('modalBackdrop',['$timeout',function($timeout){return{restrict:'EA',replace:true,templateUrl:'template/modal/backdrop.html',compile:function(tElement,tAttrs){tElement.addClass(tAttrs.backdropClass);return linkFn;}};function linkFn(scope,element,attrs){scope.animate=false;$timeout(function(){scope.animate=true;});}}]).directive('modalWindow',['$modalStack','$q',function($modalStack,$q){return{restrict:'EA',scope:{index:'@',animate:'='},replace:true,transclude:true,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||'template/modal/window.html';},link:function(scope,element,attrs){element.addClass(attrs.windowClass||'');scope.size=attrs.size;scope.close=function(evt){var modal=$modalStack.getTop();if(modal&&modal.value.backdrop&&modal.value.backdrop!='static'&&(evt.target===evt.currentTarget)){evt.preventDefault();evt.stopPropagation();$modalStack.dismiss(modal.key,'backdrop click');}};scope.$isRendered=true;var modalRenderDeferObj=$q.defer();attrs.$observe('modalRender',function(value){if(value=='true'){modalRenderDeferObj.resolve();}});modalRenderDeferObj.promise.then(function(){scope.animate=true;var inputsWithAutofocus=element[0].querySelectorAll('[autofocus]');if(inputsWithAutofocus.length){inputsWithAutofocus[0].focus();}else{element[0].focus();}var modal=$modalStack.getTop();if(modal){$modalStack.modalRendered(modal.key);}});}};}]).directive('modalAnimationClass',[function(){return{compile:function(tElement,tAttrs){if(tAttrs.modalAnimation){tElement.addClass(tAttrs.modalAnimationClass);}}};}]).directive('modalTransclude',function(){return{link:function($scope,$element,$attrs,controller,$transclude){$transclude($scope.$parent,function(clone){$element.empty();$element.append(clone);});}};}).factory('$modalStack',['$animate','$timeout','$document','$compile','$rootScope','$$stackedMap',function($animate,$timeout,$document,$compile,$rootScope,$$stackedMap){var OPENED_MODAL_CLASS='modal-open';var backdropDomEl,backdropScope;var openedWindows=$$stackedMap.createNew();var $modalStack={};function backdropIndex(){var topBackdropIndex=-1;var opened=openedWindows.keys();for(var i=0;i<opened.length;i++){if(openedWindows.get(opened[i]).value.backdrop){topBackdropIndex=i;}}return topBackdropIndex;}$rootScope.$watch(backdropIndex,function(newBackdropIndex){if(backdropScope){backdropScope.index=newBackdropIndex;}});function removeModalWindow(modalInstance){var body=$document.find('body').eq(0);var modalWindow=openedWindows.get(modalInstance).value;openedWindows.remove(modalInstance);removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,function(){body.toggleClass(OPENED_MODAL_CLASS,openedWindows.length()>0);checkRemoveBackdrop();});}function checkRemoveBackdrop(){if(backdropDomEl&&backdropIndex()==-1){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,function(){backdropScopeRef=null;});backdropDomEl=undefined;backdropScope=undefined;}}function removeAfterAnimate(domEl,scope,done){scope.animate=false;if(domEl.attr('modal-animation')&&$animate.enabled()){domEl.one('$animate:close',function closeFn(){$rootScope.$evalAsync(afterAnimating);});}else{$timeout(afterAnimating);}function afterAnimating(){if(afterAnimating.done){return;}afterAnimating.done=true;domEl.remove();scope.$destroy();if(done){done();}}setTimeout(afterAnimating,200);}$document.bind('keydown',function(evt){var modal;if(evt.which===27){modal=openedWindows.top();if(modal&&modal.value.keyboard){evt.preventDefault();$rootScope.$apply(function(){$modalStack.dismiss(modal.key,'escape key press');});}}});$modalStack.open=function(modalInstance,modal){var modalOpener=$document[0].activeElement;openedWindows.add(modalInstance,{deferred:modal.deferred,renderDeferred:modal.renderDeferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard});var body=$document.find('body').eq(0),currBackdropIndex=backdropIndex();if(currBackdropIndex>=0&&!backdropDomEl){backdropScope=$rootScope.$new(true);backdropScope.index=currBackdropIndex;var angularBackgroundDomEl=angular.element('<div modal-backdrop="modal-backdrop"></div>');angularBackgroundDomEl.attr('backdrop-class',modal.backdropClass);if(modal.animation){angularBackgroundDomEl.attr('modal-animation','true');}backdropDomEl=$compile(angularBackgroundDomEl)(backdropScope);body.append(backdropDomEl);}var angularDomEl=angular.element('<div modal-window="modal-window"></div>');angularDomEl.attr({'template-url':modal.windowTemplateUrl,'window-class':modal.windowClass,'size':modal.size,'index':openedWindows.length()-1,'animate':'animate'}).html(modal.content);if(modal.animation){angularDomEl.attr('modal-animation','true');}var modalDomEl=$compile(angularDomEl)(modal.scope);openedWindows.top().value.modalDomEl=modalDomEl;openedWindows.top().value.modalOpener=modalOpener;body.append(modalDomEl);body.addClass(OPENED_MODAL_CLASS);};function broadcastClosing(modalWindow,resultOrReason,closing){return!modalWindow.value.modalScope.$broadcast('modal.closing',resultOrReason,closing).defaultPrevented;}$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);if(modalWindow&&broadcastClosing(modalWindow,result,true)){modalWindow.value.deferred.resolve(result);removeModalWindow(modalInstance);modalWindow.value.modalOpener.focus();return true;}return!modalWindow;};$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);if(modalWindow&&broadcastClosing(modalWindow,reason,false)){modalWindow.value.deferred.reject(reason);removeModalWindow(modalInstance);modalWindow.value.modalOpener.focus();return true;}return!modalWindow;};$modalStack.dismissAll=function(reason){var topModal=this.getTop();while(topModal&&this.dismiss(topModal.key,reason)){topModal=this.getTop();}};$modalStack.getTop=function(){return openedWindows.top();};$modalStack.modalRendered=function(modalInstance){var modalWindow=openedWindows.get(modalInstance);if(modalWindow){modalWindow.value.renderDeferred.resolve();}};return $modalStack;}]).provider('$modal',function(){var $modalProvider={options:{animation:true,backdrop:true,keyboard:true},$get:['$injector','$rootScope','$q','$templateRequest','$controller','$modalStack',function($injector,$rootScope,$q,$templateRequest,$controller,$modalStack){var $modal={};function getTemplatePromise(options){return options.template?$q.when(options.template):$templateRequest(angular.isFunction(options.templateUrl)?(options.templateUrl)():options.templateUrl);}function getResolvePromises(resolves){var promisesArr=[];angular.forEach(resolves,function(value){if(angular.isFunction(value)||angular.isArray(value)){promisesArr.push($q.when($injector.invoke(value)));}});return promisesArr;}$modal.open=function(modalOptions){var modalResultDeferred=$q.defer();var modalOpenedDeferred=$q.defer();var modalRenderDeferred=$q.defer();var modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,rendered:modalRenderDeferred.promise,close:function(result){return $modalStack.close(modalInstance,result);},dismiss:function(reason){return $modalStack.dismiss(modalInstance,reason);}};modalOptions=angular.extend({},$modalProvider.options,modalOptions);modalOptions.resolve=modalOptions.resolve||{};if(!modalOptions.template&&!modalOptions.templateUrl){throw new Error('One of template or templateUrl options is required.');}var templateAndResolvePromise=$q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));templateAndResolvePromise.then(function resolveSuccess(tplAndVars){var modalScope=(modalOptions.scope||$rootScope).$new();modalScope.$close=modalInstance.close;modalScope.$dismiss=modalInstance.dismiss;var ctrlInstance,ctrlLocals={};var resolveIter=1;if(modalOptions.controller){ctrlLocals.$scope=modalScope;ctrlLocals.$modalInstance=modalInstance;angular.forEach(modalOptions.resolve,function(value,key){ctrlLocals[key]=tplAndVars[resolveIter++];});ctrlInstance=$controller(modalOptions.controller,ctrlLocals);if(modalOptions.controllerAs){modalScope[modalOptions.controllerAs]=ctrlInstance;}}$modalStack.open(modalInstance,{scope:modalScope,deferred:modalResultDeferred,renderDeferred:modalRenderDeferred,content:tplAndVars[0],animation:modalOptions.animation,backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,size:modalOptions.size});},function resolveError(reason){modalResultDeferred.reject(reason);});templateAndResolvePromise.then(function(){modalOpenedDeferred.resolve(true);},function(reason){modalOpenedDeferred.reject(reason);});return modalInstance;};return $modal;}]};return $modalProvider;});angular.module('ui.bootstrap.progressbar',[]).constant('progressConfig',{animate:true,max:100}).controller('ProgressController',['$scope','$attrs','progressConfig',function($scope,$attrs,progressConfig){var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.bars=[];$scope.max=angular.isDefined($scope.max)?$scope.max:progressConfig.max;this.addBar=function(bar,element){if(!animate){element.css({'transition':'none'});}this.bars.push(bar);bar.$watch('value',function(value){bar.percent=+(100*value/$scope.max).toFixed(2);});bar.$on('$destroy',function(){element=null;self.removeBar(bar);});};this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1);};}]).directive('progress',function(){return{restrict:'EA',replace:true,transclude:true,controller:'ProgressController',require:'progress',scope:{},templateUrl:'template/progressbar/progress.html'};}).directive('bar',function(){return{restrict:'EA',replace:true,transclude:true,require:'^progress',scope:{value:'=',max:'=?',type:'@'},templateUrl:'template/progressbar/bar.html',link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,element);}};}).directive('progressbar',function(){return{restrict:'EA',replace:true,transclude:true,controller:'ProgressController',scope:{value:'=',max:'=?',type:'@'},templateUrl:'template/progressbar/progressbar.html',link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]));}};});angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/backdrop.html",'<div class="modal-backdrop"'+'modal-animation-class="fade"'+'ng-class="{in: animate}"'+'ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"'+'></div>');}]);angular.module("template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put('template/modal/window.html','<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"'+'modal-animation-class="fade" '+'ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">'+'<div modal-transclude style="height:100%"></div>'+'</div>');}]);angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put('template/progressbar/bar.html','<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" '+'aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" '+'aria-valuetext="{{percent | number:0}}% ng-transclude></div>');}]);angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put('template/progressbar/progress.html','<div class="progress" ng-transclude></div>');}]);angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put('template/progressbar/progressbar.html','<div class="progress">'+'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" '+'aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" '+'aria-valuetext={{percent | number:0}}% ng-transclude></div>'+'</div>');}]);